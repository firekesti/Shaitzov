language: android
jdk: oraclejdk8
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/
android:
  components:
  - tools
  - platform-tools
  - build-tools-25.0.2
  - android-25
  - extra-google-google_play_services
  - extra-google-m2repository
  - extra-android-m2repository
  - addon-google_apis-google-19
before_install:
- openssl aes-256-cbc -K $encrypted_6e2dce21041e_key -iv $encrypted_6e2dce21041e_iv
  -in google-services.json.enc -out app/google-services.json -d
- chmod +x gradlew
script:
- ./gradlew clean build
deploy:
  provider: releases
  api_key:
    secure: oKzMQB4AV+wdxjVRZMz+g5mEhJ8iGM1KkI5ZnzCj0ah+Ap+vb6666guwcgBE8N5DvHC8pivtvqA+MB7W55tG9EoUxuPKjV58t4S6CPTo+QWePwCL09XqlrBA6VuBH7C1NtDbi2zmA9jAfasdZV1OHlTfQYBZSAYXP2Y1jcug0GnRyQzUpfEI+wV4CEUCNCNS7JuPQZudW3I22/1VjW/KK1zQdJG5ZKaCz7oU6MlllAYPy1C6YwJkVg2xOHWGPiDR61GrRaMSqYeXp29+Sy9yomXduoPvC27JEFuKVKsoNYekXpoXnz8YL4rWim7iqZyJBrBNmgORVNQsbkX8jZ/7Z/dQZC1ondXCE9yTixSUzYr+fevcNksaA+EKtLP7JItHp160I4rqUsbY8cbAnB2KPzJBlp+9B+0CLBYwPL6Vyaqacp/FmasaKigh7fnsoIucZNOWPeUQks5Ry2+/4RYoy7vab/O+Vblc5E3ADkZbkQzOMq9VreHFs/U3jWexowWgVYf1pfXTlZqZUDX7h1JV6uM3n5iwaSAEzaTJnnug3dK3YFjxC32x1nyIk2023rIx1sB+pPk/J3hbX8nhLChhp2wrkA7Lodcg8x4z63PrdEcot/zetiI5PngzwQ8Cy3RrU64wHxop0tT2UwiJUv6Le6eu91O93XBE2QwKrVtPJpQ=
  file: app/build/outputs/apk/app-debug.apk
  skip_cleanup: true
  on:
    repo: firekesti/Shaitzov
    tags: true
